/*
 * This build file was auto generated by running the Gradle 'init' task
 * by 'anatali' at '09/08/16 8.22' with Gradle 2.14.1
 */
 

apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'java-library-distribution'
apply plugin: 'jacoco'

//apply from: "$rootDir/gradle/jacoco.gradle"
 
version = "1.0"
sourceCompatibility = "1.8"

//Added for JaCoCo
repositories {
    mavenCentral()
}

dependencies {
	 compile fileTree(dir: './localLibs/unibo', include: '*.jar')
}

  	sourceSets {
		main {
		 java {
		   srcDirs = ['src']
		}
		}
	test {
	 java {
	   srcDirs = ['test']
	 }
	}
	}


jar {
	manifest {
		attributes "Class-Path": configurations.compile.collect { "lib/"+it.getName() }.join(' ')
		attributes 'Main-Class': 'Library'
	}
}
test {
	testLogging {
		outputs.upToDateWhen { false }		
		showStandardStreams = true		
		events 'failed' , 'passed' //,  'started', 'skipped', 		
	}
}
test.afterSuite { TestDescriptor suite, TestResult result -> //add closure to be notified
	if( !suite.parent && result.getTestCount() > 0) { //there is at least one test
		long elapsedTestTime = result.getEndTime() - result.getStartTime()
 		System.out.println("""AFTERTEST Elapsed time for execution of ${result.getTestCount()} test(s):  $elapsedTestTime ms""");
	}
}

jacocoTestReport {
    reports {
        xml.enabled false
        csv.enabled false
        html.destination "${buildDir}/jacocoHtml"
    }
}
test.finalizedBy jacocoTestReport
